tinymce.PluginManager.add("formula",function(t,e){function n(){t.dom;win=tinymce.activeEditor.windowManager.open({title:"Formula",size:"large",body:{type:"panel",items:[{type:"htmlpanel",html:'<style>#leauiFormulaIfr {width: 822px !important;height: 382px !important;}</style><iframe name="leauiFormulaIfr" id="leauiFormulaIfr" src="'+e+"/index.html?"+(new Date).getTime()+'" scrolling="no" frameborder="0"></iframe>'}]},buttons:[{type:"cancel",text:"Cancel",onAction:function(){this.parent().parent().close()}},{type:"custom",text:"Insert Formula",subtype:"primary",name:"insert_formula"}],onAction:function(e,n){window.frames.leauiFormulaIfr&&window.frames.leauiFormulaIfr.getData?window.frames.leauiFormulaIfr.getData(function(n,a){n&&t.insertContent('<img src="'+n+'" data-latex="'+a+'"/>'),e.close()}):e.close()}})}t.ui.registry.addButton("formula",{icon:"gamma",tooltip:"Insert Formula",onAction:n}),t.ui.registry.addMenuItem("formula",{icon:"gamma",text:"Insert Formula",onAction:n,context:"insert",prependToContext:!0})});